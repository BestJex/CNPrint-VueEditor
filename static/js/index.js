webpackJsonp([1],{100:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(61),n=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);var r=i(101),l=i(30),s=l(n.a,r.a,!1,null,null,null);t.default=s.exports},101:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{style:e.getStyle,on:{mousedown:function(t){return t.stopPropagation(),e.mouseDown(t)}}})},n=[],a={render:o,staticRenderFns:n};t.a=a},102:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){var i=void 0;if(e>t){var o=[t,e];e=o[0],t=o[1]}i=t,i*=t,i+=t,i>>=1,i+=e,b[i]=1}function t(t,i){var o=void 0;for(v[t+_*i]=1,o=-2;o<2;o++)v[t+o+_*(i-2)]=1,v[t-2+_*(i+o+1)]=1,v[t+2+_*(i+o)]=1,v[t+o+1+_*(i+2)]=1;for(o=0;o<2;o++)e(t-1,i+o),e(t+1,i-o),e(t-o,i-1),e(t+o,i+1)}function i(e){for(;e>=255;)e-=255,e=(e>>8)+(255&e);return e}function o(e,t,o,n){var a=void 0,r=void 0,l=void 0;for(a=0;a<n;a++)h[o+a]=0;for(a=0;a<t;a++){if(255!==(l=g[h[e+a]^h[o]]))for(r=1;r<n;r++)h[o+r-1]=h[o+r]^p[i(l+A[n-r])];else for(r=o;r<o+n;r++)h[r]=h[r+1];h[o+n-1]=255===l?0:p[i(l+A[0])]}}function n(e,t){var i=void 0;if(e>t){var o=[t,e];e=o[0],t=o[1]}return i=t,i+=t*t,i>>=1,i+=e,b[i]}function a(e){var t=void 0,i=void 0,o=void 0,a=void 0;switch(e){case 0:for(i=0;i<_;i++)for(t=0;t<_;t++)t+i&1||n(t,i)||(v[t+i*_]^=1);break;case 1:for(i=0;i<_;i++)for(t=0;t<_;t++)1&i||n(t,i)||(v[t+i*_]^=1);break;case 2:for(i=0;i<_;i++)for(o=0,t=0;t<_;t++,o++)3===o&&(o=0),o||n(t,i)||(v[t+i*_]^=1);break;case 3:for(a=0,i=0;i<_;i++,a++)for(3===a&&(a=0),o=a,t=0;t<_;t++,o++)3===o&&(o=0),o||n(t,i)||(v[t+i*_]^=1);break;case 4:for(i=0;i<_;i++)for(o=0,a=i>>1&1,t=0;t<_;t++,o++)3===o&&(o=0,a=!a),a||n(t,i)||(v[t+i*_]^=1);break;case 5:for(a=0,i=0;i<_;i++,a++)for(3===a&&(a=0),o=0,t=0;t<_;t++,o++)3===o&&(o=0),(t&i&1)+!(!o|!a)||n(t,i)||(v[t+i*_]^=1);break;case 6:for(a=0,i=0;i<_;i++,a++)for(3===a&&(a=0),o=0,t=0;t<_;t++,o++)3===o&&(o=0),(t&i&1)+(o&&o===a)&1||n(t,i)||(v[t+i*_]^=1);break;case 7:for(a=0,i=0;i<_;i++,a++)for(3===a&&(a=0),o=0,t=0;t<_;t++,o++)3===o&&(o=0),(o&&o===a)+(t+i&1)&1||n(t,i)||(v[t+i*_]^=1)}}function r(e){var t=void 0,i=0;for(t=0;t<=e;t++)x[t]>=5&&(i+=$+x[t]-5);for(t=3;t<e-1;t+=2)x[t-2]===x[t+2]&&x[t+2]===x[t-1]&&x[t-1]===x[t+1]&&3*x[t-1]===x[t]&&(0===x[t-3]||t+3>e||3*x[t-3]>=4*x[t]||3*x[t+3]>=4*x[t])&&(i+=L);return i}function l(){var e=void 0,t=void 0,i=void 0,o=void 0,n=void 0,a=0,l=0;for(t=0;t<_-1;t++)for(e=0;e<_-1;e++)(v[e+_*t]&&v[e+1+_*t]&&v[e+_*(t+1)]&&v[e+1+_*(t+1)]||!(v[e+_*t]||v[e+1+_*t]||v[e+_*(t+1)]||v[e+1+_*(t+1)]))&&(a+=T);for(t=0;t<_;t++){for(x[0]=0,i=o=e=0;e<_;e++)(n=v[e+_*t])===o?x[i]++:x[++i]=1,o=n,l+=o?1:-1;a+=r(i)}l<0&&(l=-l);var s=l,c=0;for(s+=s<<2,s<<=1;s>_*_;)s-=_*_,c++;for(a+=c*X,e=0;e<_;e++){for(x[0]=0,i=o=t=0;t<_;t++)(n=v[e+_*t])===o?x[i]++:x[++i]=1,o=n;a+=r(i)}return a}function s(r){var s=void 0,x=void 0,$=void 0,T=void 0,L=void 0,X=void 0,O=void 0,I=void 0;T=r.length,y=0;do{if(y++,$=4*(z-1)+16*(y-1),w=u[$++],C=u[$++],k=u[$++],S=u[$],$=k*(w+C)+C-3+(y<=9),T<=$)break}while(y<40);for(_=17+4*y,L=k+(k+S)*(w+C)+C,T=0;T<L;T++)m[T]=0;for(h=r.slice(0),T=0;T<_*_;T++)v[T]=0;for(T=0;T<(_*(_+1)+1)/2;T++)b[T]=0;for(T=0;T<3;T++){for($=0,x=0,1===T&&($=_-7),2===T&&(x=_-7),v[x+3+_*($+3)]=1,s=0;s<6;s++)v[x+s+_*$]=1,v[x+_*($+s+1)]=1,v[x+6+_*($+s)]=1,v[x+s+1+_*($+6)]=1;for(s=1;s<5;s++)e(x+s,$+1),e(x+1,$+s+1),e(x+5,$+s),e(x+s+1,$+5);for(s=2;s<4;s++)v[x+s+_*($+2)]=1,v[x+2+_*($+s+1)]=1,v[x+4+_*($+s)]=1,v[x+s+1+_*($+4)]=1}if(y>1)for(T=c[y],x=_-7;;){for(s=_-7;s>T-3&&(t(s,x),!(s<T));)s-=T;if(x<=T+9)break;x-=T,t(6,x),t(x,6)}for(v[8+_*(_-8)]=1,x=0;x<7;x++)e(7,x),e(_-8,x),e(7,x+_-7);for(s=0;s<8;s++)e(s,7),e(s+_-8,7),e(s,_-8);for(s=0;s<9;s++)e(s,8);for(s=0;s<8;s++)e(s+_-8,8),e(8,s);for(x=0;x<7;x++)e(8,x+_-7);for(s=0;s<_-14;s++)1&s?(e(8+s,6),e(6,8+s)):(v[8+s+6*_]=1,v[6+_*(8+s)]=1);if(y>6)for(T=f[y-7],$=17,s=0;s<6;s++)for(x=0;x<3;x++,$--)1&($>11?y>>$-12:T>>$)?(v[5-s+_*(2-x+_-11)]=1,v[2-x+_-11+_*(5-s)]=1):(e(5-s,2-x+_-11),e(2-x+_-11,5-s));for(x=0;x<_;x++)for(s=0;s<=x;s++)v[s+_*x]&&e(s,x);for(L=h.length,X=0;X<L;X++)m[X]=h.charCodeAt(X);if(h=m.slice(0),s=k*(w+C)+C,L>=s-2&&(L=s-2,y>9&&L--),X=L,y>9){for(h[X+2]=0,h[X+3]=0;X--;)T=h[X],h[X+3]|=255&T<<4,h[X+2]=T>>4;h[2]|=255&L<<4,h[1]=L>>4,h[0]=64|L>>12}else{for(h[X+1]=0,h[X+2]=0;X--;)T=h[X],h[X+2]|=255&T<<4,h[X+1]=T>>4;h[1]|=255&L<<4,h[0]=64|L>>4}for(X=L+3-(y<10);X<s;)h[X++]=236,h[X++]=17;for(A[0]=1,X=0;X<S;X++){for(A[X+1]=1,O=X;O>0;O--)A[O]=A[O]?A[O-1]^p[i(g[A[O]]+X)]:A[O-1];A[0]=p[i(g[A[0]]+X)]}for(X=0;X<=S;X++)A[X]=g[A[X]];for($=s,x=0,X=0;X<w;X++)o(x,k,$,S),x+=k,$+=S;for(X=0;X<C;X++)o(x,k+1,$,S),x+=k+1,$+=S;for(x=0,X=0;X<k;X++){for(O=0;O<w;O++)m[x++]=h[X+O*k];for(O=0;O<C;O++)m[x++]=h[w*k+X+O*(k+1)]}for(O=0;O<C;O++)m[x++]=h[w*k+X+O*(k+1)];for(X=0;X<S;X++)for(O=0;O<w+C;O++)m[x++]=h[s+X+O*S];for(h=m,s=x=_-1,$=L=1,I=(k+S)*(w+C)+C,X=0;X<I;X++)for(T=h[X],O=0;O<8;O++,T<<=1){128&T&&(v[s+_*x]=1);do{L?s--:(s++,$?0!==x?x--:(s-=2,$=!$,6===s&&(s--,x=9)):x!==_-1?x++:(s-=2,$=!$,6===s&&(s--,x-=8))),L=!L}while(n(s,x))}for(h=v.slice(0),T=0,x=3e4,$=0;$<8&&(a($),s=l(),s<x&&(x=s,T=$),7!==T);$++)v=h.slice(0);for(T!==$&&a(T),x=d[T+(z-1<<3)],$=0;$<8;$++,x>>=1)1&x&&(v[_-1-$+8*_]=1,$<6?v[8+_*$]=1:v[8+_*($+1)]=1);for($=0;$<7;$++,x>>=1)1&x&&(v[8+_*(_-7+$)]=1,$?v[6-$+8*_]=1:v[7+8*_]=1);return v}var c=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],f=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],d=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],u=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],g=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],p=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],h=[],m=[],v=[],b=[],x=[],y=void 0,_=void 0,w=void 0,C=void 0,k=void 0,S=void 0,z=2,A=[],$=3,T=3,L=40,X=10,O=null,I=null,P={get ecclevel(){return z},set ecclevel(e){z=e},get size(){return I},set size(e){I=e},get canvas(){return O},set canvas(e){O=e},getFrame:function(e){return s(e)},draw:function(e,t,i,o){if(z=o||z,!(t=t||O))return void console.warn("No canvas provided to draw QR code in!");i=i||I||Math.min(t.width,t.height);var n=s(e),a=t.getContext("2d"),r=Math.round(i/(_+8)),l=r*(_+8),c=Math.floor((i-l)/2);i=l,a.clearRect(0,0,t.width,t.height),a.fillStyle="#fff",a.fillRect(0,0,i,i),a.fillStyle="#000";for(var f=0;f<_;f++)for(var d=0;d<_;d++)n[d*_+f]&&a.fillRect(r*(4+f)+c,r*(4+d)+c,r,r)},toDataURL:function(e,t,i){var o=document.createElement("canvas");return o.height=o.width=t||I||300,P.draw(e,o,o.width,i),o.toDataURL()},makeImage:function(e,t,i){var o=new Image;return o.src=P.toDataURL(e,t,i),o}};return P}()},103:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"drag_div",style:e.divStyle,attrs:{draggable:"false"},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[i("div",{staticClass:"drag_div_in",style:e.inStyle,attrs:{draggable:"false"},on:{mousedown:function(t){return t.stopPropagation(),e.mouseDown(t)}}},["text"===e.config.type?[e._v(e._s(e.getText))]:e._e(),e._v(" "),"qrcode"===e.config.type?i("canvas",{ref:"can"}):e._e(),e._v(" "),"barcode"!==e.config.type||e.config.config.hideText?e._e():i("p",{style:e.pStyle},[e._v(e._s(e.getText))])],2),e._v(" "),e._l(e.array,function(t){return e.isShow(t)?i("drag-angle",{key:t,attrs:{sign:t},on:{reSize:e.handleResize}}):e._e()})],2)},n=[],a={render:o,staticRenderFns:n};t.a=a},104:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(62),a=o(n),r=i(108),l=o(r),s=i(116),c=o(s),f=i(125),d=o(f),u=i(70),g=o(u),p=i(129),h=o(p),m=i(140),v=o(m);e.exports={Editor:{data:function(){return{rate:3.78,typeArray:["h-text","v-text","h-line","v-line","rect","barcode","qrcode","image"],pageZoom:1,caiNiaoPageStyle:{},pageStyle:{width:0,height:0},offset_h:{},offset_v:{},layout:[],styleKeys:["id","height","width","left","top","ref","src","value","type","ratioMode","zIndex","rules","alias"],disMenu:[],menuList:{Delete:"删除","Ctrl+c":"复制","Ctrl+up":"置顶","Ctrl+down":"置底"},menuStyle:{zIndex:1e3,visibility:"hidden",left:0,top:0},activeName:"config",print:[],config:{pageSize:{"自定义":"",A4:"210X297",A5:"148X210",A6:"105X148",A3:"297X420",B5:"176X250",B4:"250X353",B3:"353X500",C6:"114X162",C5:"162X229",C4:"229X324"},fontFamilyList:["宋体","黑体","楷体","仿宋体"],fontWeightList:{normal:"默认",bold:"粗体",light:"细体"},valignList:{top:"left",middle:"center",bottom:"right"},fontAlign:["left","center","right"],barcodeType:["code128a","code128b","code128c","code11","postnet","Code39","Code93","upca","upce","ean8","ean13","itf14","c25inter","maxicode","datamatrix"],qrcodeType:["qrcode","pdf417"],lineType:{solid:"实线条",dashed:"破折线",dotted:"点线条"},page:{size:"210X297",width:210,height:297,name:"",splitable:!1,describe:"",horizontalOffset:0,verticalOffset:0,backgroundImage:"",id:"",rules:{width:{type:"number",required:!0,message:"请设置模板宽度",trigger:"change"},height:{type:"number",required:!0,message:"请设置模板高度",trigger:"change"},name:[{required:!0,message:"请输入模板名称",trigger:"change"}]}},text:{zIndex:1,id:"",left:0,top:0,width:30,height:8,orientation:"horizontal",rotation:0,alpha:1,fontFamily:"宋体",fontSize:8,letterSpacing:"",lineHeight:"",fontColor:"",fontWeight:"normal",wrap:!1,fontStyle:[],align:"left",valign:"left",value:"请输入文本",alias:"",rules:{lineHeight:{pattern:/^\d+%?$/,message:"请设置正确的行高",trigger:"change"},value:{required:!0,message:"请输入文本内容",trigger:"change"}}},barcode:{zIndex:1,id:"",left:0,top:0,width:60,height:30,alpha:1,value:"请输入条形码",type:"code128",hideText:!1,rules:{value:{required:!0,message:"请输入条形码内容",trigger:"change"}}},qrcode:{zIndex:1,id:"",left:0,top:0,width:30,height:30,alpha:1,value:"",type:"qrcode",ratioMode:"keepRatio",rules:{value:{required:!0,message:"请输入二维码内容",trigger:"change"}}},line:{zIndex:1,id:"",startX:10,startY:10,endX:40,endY:40,lineColor:"#000000",lineWidth:1,lineType:"solid",rules:{}},rect:{zIndex:1,id:"",left:50,top:50,width:50,height:50,rotation:0,fillColor:"",borderWidth:0,borderColor:"",borderStyle:"",rules:{}},image:{zIndex:1,id:"",left:0,top:0,width:100,height:100,rotation:0,alpha:1}}}},mounted:function(){var e=this,t=this.CONFIG=JSON.parse((0,v.default)(this.config));for(var i in t)t.hasOwnProperty(i)&&delete t[i].rules;document.querySelector(".editor_area").addEventListener("contextmenu",function(t){t=t||window.event,e.menuStyle.left=t.pageX+"px",e.menuStyle.top=t.pageY+"px",e.menuStyle.visibility="visible",t.preventDefault()}),document.addEventListener("click",function(){e.menuStyle.visibility="hidden"}),document.addEventListener("keydown",function(t){t=t||window.event;var i=t.keyCode;46===i?e.handleContextMenu("D"):t.ctrlKey&&(67===i?e.handleContextMenu("c"):38===i?e.handleContextMenu("u"):40===i&&e.handleContextMenu("d")),/^(37|38|39|40)$/.test(i)&&(e.handleContextMenu(i),t.preventDefault()),e.menuStyle.visibility="hidden"})},computed:{getActiveLayoutObj:function(){var e=!1;return this.layout.forEach(function(t){t.active&&(e=t)}),e},getActiveLayoutType:function(){var e=this.getConfigType(this.getActiveLayoutObj);return this.activeName="page"===e?"config":"style",e},showStyleTab:function(){return!["page"].includes(this.getActiveLayoutType)},showConfigTab:function(){return["page","text","barcode","qrcode"].includes(this.getActiveLayoutType)}},methods:{handlePreview:function(e){var t=this,i=this.saveXML();fetch("http://103.27.4.146:3001/api/saveXML",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"xml="+i}).then(function(e){return e.text()}).then(function(i){var o=JSON.parse(i);new h.default(function(e){t.setPrinterConfig(e,t.printerConfig)}).then(function(){t.sendPrint(null,"",[{templateURL:o.data.file+"?"+Math.random().toString(32).slice(-8),data:{}}],["pdf","image"].includes(e),e)})})},saveXML:function(){var e=this,t=(new DOMParser).parseFromString('<?xml version="1.0" encoding="UTF-8"?><page xmlns="http://cloudprint.cainiao.com/print"\n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:schemaLocation="http://cloudprint.cainiao.com/print http://cloudprint-docs-resource.oss-cn-shanghai.aliyuncs.com/lpml_schema.xsd"\n        xmlns:editor="http://cloudprint.cainiao.com/schema/editor"></page>',"text/xml"),i=t.getElementsByTagName("page")[0],o=!0,n=!1,a=void 0;try{for(var r,l=(0,g.default)((0,d.default)(this.config.page));!(o=(r=l.next()).done);o=!0){var s=(0,c.default)(r.value,2),f=s[0],u=s[1];"rules"!==f&&""!==u&&i.setAttribute(f,u)}}catch(e){n=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw a}}this.layout.forEach(function(t){var o=t.type.replace(/[vh]-/,""),n=t.config,a=document.createElement("layout");if("line"===o){a=document.createElement(o),["startX","startY","endX","endY"].forEach(function(e){a.setAttribute(e,n[e])});var r="";["lineColor","lineWidth","lineType"].forEach(function(e){r+=e+":"+n[e]+("lineWidth"===e?"pt":"")+";"}),a.setAttribute("style",r)}else{["id","height","width","left","top","ref","orientation"].forEach(function(e){if(n.hasOwnProperty(e)){var t=n[e];""!==t&&a.setAttribute(e,t)}}),o="qrcode"===o?"barcode":o;var l=document.createElement(o);["src","value","type","ratioMode","alias"].forEach(function(e){n.hasOwnProperty(e)&&("value"===e?l.textContent="<![CDATA["+n.value+"]]>":"alias"===e?n.alias&&l.setAttribute("editor:_printName_",n.alias):l.setAttribute(e,n[e]))});var s="",f=!0,u=!1,p=void 0;try{for(var h,m=(0,g.default)((0,d.default)(n));!(f=(h=m.next()).done);f=!0)!function(){var t=(0,c.default)(h.value,2),i=t[0],o=t[1];e.styleKeys.includes(i)||("fontStyle"===i?["fontItalic","fontUnderline"].forEach(function(e){o.includes(e)&&(s+=e+":true;")}):"hideText"!==i||o?o&&("alpha"===i&&1===o||(s+=i+":"+o+";")):s+=i+":false;")}()}catch(e){u=!0,p=e}finally{try{!f&&m.return&&m.return()}finally{if(u)throw p}}s&&l.setAttribute("style",s),a.setAttribute("style","overflow:visible;zIndex:"+n.zIndex),a.appendChild(l)}i.appendChild(a)});var p=(new XMLSerializer).serializeToString(t);return p=p.replace(/(start|end)([xy])=/g,function(e,t,i){return t+i.toUpperCase()+"="}),p=p.replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/ xmlns="http:\/\/www.w3.org\/1999\/xhtml"/gm,""),p=p.replace(/editor:_printname_/gm,"editor:_printName_"),console.log(p),p},handleXML:function(){var e=this;this.$prompt("请输入XML模板(可选)","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var i=t.value;if(i){if(!/^<\?xml[\s\S]+<\/page>$/im.test(i))return e.$message({type:"error",message:"XML模板不正确"})}else i='<?xml version="1.0" encoding="UTF-8"?><page xmlns="http://cloudprint.cainiao.com/print" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editor="http://cloudprint.cainiao.com/schema/editor" xsi:schemaLocation="http://cloudprint.cainiao.com/print http://cloudprint-docs-resource.oss-cn-shanghai.aliyuncs.com/lpml_schema.xsd" size="210X297" width="210" height="297" splitable="false" horizontalOffset="0" verticalOffset="0"><layout height="40.73" width="53.44" left="147.09" top="76.46" style="overflow:visible;zIndex:14"><rect style="fillColor:#F4EEEE;borderWidth:2;borderColor:#FB0909;borderStyle:solid;overflow:visible;"></rect></layout><layout height="41.86" width="68.88" left="66.93" top="23.54" orientation="horizontal" style="overflow:visible;zIndex:15"><text style="orientation:horizontal;fontFamily:宋体;fontSize:12;fontColor:#EE0A0A;fontWeight:normal;align:left;valign:left;overflow:visible;"><![CDATA[支持文本、图片、直线、矩形、二维码、条形码，暂不支持表格可视化编辑。支持右键菜单快捷操作和快捷键操作。]]></text></layout><layout height="19.95" width="39.89" left="13.23" top="78.57" style="overflow:visible;zIndex:4"><barcode type="code128" style="hideText:false;overflow:visible;"><![CDATA[123456789]]></barcode></layout><layout height="23.65" width="44.81" left="147.89" top="23.53" style="overflow:visible;zIndex:5"><barcode type="qrcode" style="hideText:false;overflow:visible;"><![CDATA[http://www.scscms.com/]]></barcode></layout><layout height="21.16" width="69.05" left="69.84" top="78.3" style="overflow:visible;zIndex:7"><image src="http://www.scscms.com/scs_img/logo.png" style="overflow:visible;"></image></layout><layout height="37.41" width="37.41" left="14.01" top="23.55" style="overflow:visible;zIndex:8"><barcode type="qrcode" ratiomode="keepRatio"><![CDATA[http://www.scscms.com/]]></barcode></layout><line startX="9" startY="9" endX="199.85" endY="9" style="lineColor:#000000;lineWidth:2pt;lineType:solid;"></line><line startX="98.62" startY="110.79" endX="98.62" endY="140.79" style="lineColor:#000000;lineWidth:2pt;lineType:solid;"></line></page>';e.convertXML(i)}).catch(function(){})},convertXML:function(e){var t=this,i=function(e,t){for(var i=t.length;i--;){var o=t[i];if("style"===o.name)o.value.replace(/(\w+):(#?\w+)/g,function(t,i,o){return"hideText"===i&&(o="true"===o),e[i]=o});else{var n=o.name.includes("editor:_print")?"alias":o.name;e.hasOwnProperty(n)&&(e[n]=o.value)}}},o=e.replace(/(["\[])<%=/gm,"$1&lt;%=").replace(/%>(["\]])/gm,"%&gt;$1").replace(/<%[\s\S]*?%>/gm,""),n=new DOMParser,r=n.parseFromString(o,"text/xml"),s=r.getElementsByTagName("parsererror");if(s.length)this.$message({type:"error",message:"XML模板格式有误!"}),console.error(s[0].textContent);else{var c=r.getElementsByTagName("page");c=c.length?c[0]:r.getElementsByTagName("layout")[0],(0,l.default)(c.children).forEach(function(e){var o=e.tagName;if("layout"===o||"line"===o){var n=e.firstElementChild,r=n?n.tagName:o,l=(0,a.default)({},t.CONFIG[r]),s=e.attributes;"line"===o&&(r=s.endX-s.startX>s.endY-s.startY?"v-line":"h-line"),"image"===r&&(l.src=n.src),i(l,s),n&&i(l,n.attributes),"text"!==r&&"barcode"!==r||(l.value=n.textContent.replace(/&lt;/g,"<").replace(/&gt;/g,">")),t.layout.push({type:r,zoom:t.pageZoom,active:!1,config:l})}})}},handleDropDown:function(e){var t=this;if(this.typeArray.includes(e)){var i={type:e.includes("text")?e.replace(/^[vh]-/,""):e,zoom:this.pageZoom,active:!0,config:{}},o=(0,a.default)(i.config,this.CONFIG[e.replace(/^[vh]-/,"")]);e.includes("text")?o.orientation="h-text"===e?"horizontal":"vertical":e.includes("line")?o["h-line"===e?"endY":"endX"]="h-line"===e?o.startX:o.startY:"image"===e&&this.$prompt("请输入图片地址","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^https?:\/\/.+\.(jpg|gif|png)/i,inputErrorMessage:"图片地址不正确"}).then(function(e){var n=e.value;o.src=n;var a=new Image;a.onload=function(){i.config.width=t.getExchange(a.width),i.config.height=t.getExchange(a.height),t.layout.push(i),t.activateLayout(i)},a.src=o.src}).catch(function(){}),o.zIndex=this.layout.length+1,"image"!==e&&(this.layout.push(i),this.activateLayout(i))}},formatTooltip:function(e){return"缩放："+100*e+"%"},getZoom:function(e){return e*this.rate*this.pageZoom},getExchange:function(e){return(e/this.rate).toFixed(2)},editPageSize:function(){var e=this.pageStyle,t=this.config.page,i=this.getZoom;if(e.width=i(t.width)+"px",e.height=i(t.height)+"px",t.backgroundImage&&(e.backgroundImage="url("+t.backgroundImage+")"),this.cainiao){var o=(0,a.default)({},e);o.backgroundImage="url("+this.cainiao.backgroundImage+")",o.height=i(this.cainiao.height)+"px",o.marginBottom=0,o.marginTop="20px",this.caiNiaoPageStyle=o,e.marginTop=0}this.offset_h={left:i(t.horizontalOffset)+"px",fontSize:i(8)+"px",width:i(t.width-2*t.horizontalOffset)+"px"},this.offset_v={top:i(t.verticalOffset)+"px",height:i(t.height-2*t.verticalOffset)+"px"}},handlePageZoom:function(e){var t=this.pageZoom+(e?.25:-.25);t<.25&&(t=.25),t>6&&(t=6),this.pageZoom=t},clickContextMenu:function(e){this.handleContextMenu(e.target.innerText.replace(/(?:.+\+)?(\w).+/,"$1"))},handleContextMenu:function(e){var t=this;if(this.getActiveLayoutObj){if(this.disMenu.includes(e))return;switch(e){case"D":this.layout.forEach(function(e,i){e.active&&(t.store?t.print.forEach(function(t){var i=t.value.findIndex(function(t){return t===e.name});i>=0&&t.list.findIndex(function(t){return t.name===e.name&&!t.disabled})>=0&&t.value.splice(i,1)}):t.layout.splice(i,1))});break;case"c":var i=JSON.parse((0,v.default)(this.getActiveLayoutObj)),o=i.config;o.hasOwnProperty("startX")?(o.startY+=8,o.endY+=8):(o.left+=8,o.top+=8),o.zIndex+=1,this.getActiveLayoutObj.active=!1,this.layout.push(i);break;case"u":var n=0;this.layout.forEach(function(e){n=Math.max(e.config.zIndex,n)}),this.getActiveLayoutObj.config.zIndex=n+1;break;case"d":var a=100;this.layout.forEach(function(e){e.config.zIndex+=1,a=Math.min(e.config.zIndex,a)}),this.getActiveLayoutObj.config.zIndex=a-1;break;case 37:case 38:case 39:case 40:var r=this.config[this.getConfigType(this.getActiveLayoutObj)],l=/(37|38)/.test(e)?-1:1;if(r.hasOwnProperty("startX")){var s=/(37|39)/.test(e)?"X":"Y";r["start"+s]+=l,r["end"+s]+=l}else r[/(37|39)/.test(e)?"left":"top"]+=l}}},getConfigType:function(e){return e?e.type.replace(/^[vh]-/,""):"page"},activateLayout:function(e){var t=this;this.menuStyle.visibility="hidden",this.layout.forEach(function(i){if(i===e){i.active=!0;var o=t.config[t.getConfigType(e)],n=i.config;for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])}else i.active=!1})},dragUpdate:function(e){var t=this.getActiveLayoutType;if("page"!==t){var i=this.config[t];for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o])}}},watch:{config:{handler:function(e){var t=this.getActiveLayoutObj;if(t){var i=e[this.getConfigType(t)];for(var o in i)i.hasOwnProperty(o)&&(t.config[o]=i[o]);"qrcode"===t.type&&(t.config.width=t.config.height=Math.max(i.width,i.height)),this.cainiao&&(t.config.top=Math.max(t.config.top,0))}if(e.page.size){var n=e.page.size.split("X");this.printerConfig.paperSize.width=e.page.width=n[0]>>0,this.printerConfig.paperSize.height=e.page.height=n[1]>>0}this.editPageSize()},immediate:!0,deep:!0},pageZoom:function(e){this.editPageSize(),this.layout.forEach(function(t){t.zoom=e})}}},Printer:{data:function(){return{socket:null,UUID:[],printer:{version:"1.0",errMsg:"等待初始化",printerList:[],printerDate:[]},resolveList:{},printerConfig:{name:"",needTopLogo:!1,needBottomLogo:!1,horizontalOffset:0,verticalOffset:0,forceNoPageMargins:!1,paperSize:{width:1,height:1}},printStatus:{0:"初始化",3:"队列中",6:"已渲染",8:"已预览",10:"已打印",13:"已失败",16:"初取消",20:"错误"}}},created:function(){var e=this;this.socket=new WebSocket("ws://localhost:13528"),this.socket.onopen=function(){e.socket.onmessage=function(t){console.log("监听到一条消息, data:",t.data);var i=JSON.parse(t.data),o=(i.taskID+"").split("_")[0];if("success"===i.status||"printed"===i.taskStatus)switch(i.cmd){case"getAgentInfo":return e.socket.send((0,v.default)(e.getDefaultRequest("getPrinters",i.requestID)));case"getPrinters":if(i.printers.length){var n=e.printer.printerList;i.printers.forEach(function(t){"enable"===t.status&&n.push(t.name),i.defaultPrinter&&(e.printerConfig.name=t.name)})}else e.printer.errMsg="无可用的打印机!";break;case"getPrinterConfig":console.log(e.printerConfig);break;case"setPrinterConfig":e.resolve_setPrinterConfig&&e.resolve_setPrinterConfig("setPrinterConfig");break;case"notifyPrintResult":"printed"===i.taskStatus?i.printStatus.forEach(function(t){e.setPrintStatus(t.documentID,10)}):"rendered"===i.taskStatus&&e.setPrintStatus(o,6);break;case"print":if(i.previewURL||i.previewImage){var a=document.createElement("a");a.href=i.previewURL?i.previewURL:i.previewImage[0],a.target="_blank",a.click()}else console.log("打印成功:",i)}else"notifyPrintResult"===i.cmd||(e.printer.errMsg=i.msg,console.error(i)),e.$monitor.push({title:"打印错误信息"+i.msg,info:(0,v.default)(i)})},e.socket.onclose=function(){e.printer.errMsg="菜鸟打印组件连接断开！"},e.socket.send((0,v.default)(e.getDefaultRequest("getAgentInfo"))),e.printer.errMsg=""},this.socket.onerror=function(){e.$notify.error({title:"系统错误",duration:0,dangerouslyUseHTMLString:!0,message:'<div class="print_info">亲，系统检测到菜鸟打印组件启动失败，解决办法：\n                        <h3>1、未安装控件</h3>\n                        <p>请先安装控件，<a href="http://cloudprint.cainiao.com/cloudprint/client/CNPrintSetup.exe" target="_blank">请点击此处下载</a>。安装好后重启浏览器即可。</p>\n                        <h3>2、已安装控件</h3>\n                        <p>请在电脑的开始菜单--\x3e“所有程序”里找到“CAINIAO打印组件”进行启动。</p></div>'}),e.printer.errMsg="连接打印组件失败！"}},methods:{setPrintStatus:function(e,t){},getDefaultRequest:function(e,t){return{version:this.printer.version,cmd:e,requestID:t||this.getUUID()}},getUUID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=void 0;do{t=Math.random().toString(16).slice(-1*e).toUpperCase()}while(this.UUID.includes(t));return this.UUID.push(t),t},getPrinterConfig:function(e){var t=this.getDefaultRequest("getPrinterConfig");t.printer=this.printerConfig.name=e,this.socket.send((0,v.default)(t))},setPrinterConfig:function(e,t){e&&(this.resolve_setPrinterConfig=e);var i=this.getDefaultRequest("setPrinterConfig",this.getUUID());i.printer=(0,a.default)(this.printerConfig,t),i.printer.paperSize.width>>=0,i.printer.paperSize.height>>=0,console.log((0,v.default)(i)),this.socket.send((0,v.default)(i))},sendPrint:function(e,t,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pdf";e&&(this.resolveList["print"+t]=e);var a=this.getDefaultRequest("print",this.getUUID());a.task={previewType:n,preview:o,taskID:t+"_"+this.getUUID(),printer:this.printerConfig.name,notifyType:["print"],notifyMode:"allInOne",documents:[{documentID:t+"_"+this.getUUID(),contents:i}]},this.socket.send((0,v.default)(a))}}}}},142:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"editor"},[i("div",{staticClass:"editor_top"},[i("div",{staticClass:"editor_logo"}),e._v(" "),i("el-button",{staticStyle:{float:"right",margin:"14px"},attrs:{round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("打印")]),e._v(" "),i("el-button",{staticStyle:{float:"right",margin:"14px"},attrs:{round:""},on:{click:e.handleXML}},[e._v("转换模板")]),e._v(" "),i("el-dropdown",{on:{command:e.handleDropDown}},[i("div",{staticClass:"editor_button"},[i("i",{staticClass:"fa fa-font"}),e._v("文本")]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"h-text"}},[i("i",{staticClass:"fa fa-align-left"}),e._v("横排")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"v-text"}},[i("i",{staticClass:"fa fa-align-left fa-rotate-90"}),e._v("竖排")])],1)],1),e._v(" "),i("div",{staticClass:"editor_button",on:{click:function(t){e.handleDropDown("image")}}},[i("i",{staticClass:"fa fa-image"}),e._v("图片")]),e._v(" "),i("el-dropdown",{on:{command:e.handleDropDown}},[i("div",{staticClass:"editor_button"},[i("i",{staticClass:"fa fa-star"}),e._v("形状")]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"h-line"}},[i("i",{staticClass:"fa fa-arrows-alt-h "}),e._v("横线")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"v-line"}},[i("i",{staticClass:"fa fa-arrows-alt-v"}),e._v("  竖线")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"rect"}},[i("i",{staticClass:"fa fa-square"}),e._v("矩形")])],1)],1),e._v(" "),i("div",{staticClass:"editor_button",on:{click:function(t){e.handleDropDown("qrcode")}}},[i("i",{staticClass:"fa fa-qrcode"}),e._v("二维码")]),e._v(" "),i("div",{staticClass:"editor_button",on:{click:function(t){e.handleDropDown("barcode")}}},[i("i",{staticClass:"fa fa-barcode"}),e._v("条形码")])],1),e._v(" "),i("div",{staticClass:"editor_content"},[i("div",{staticClass:"editor_area",on:{click:e.activateLayout}},[i("div",{staticClass:"editor_bg",style:e.pageStyle},[i("div",{staticClass:"page_offset_h",style:e.offset_h}),e._v(" "),i("div",{staticClass:"page_offset_v",style:e.offset_v}),e._v(" "),e._l(e.layout,function(t,o){return i("drag",{key:t.type+o,attrs:{config:t},on:{update:e.dragUpdate,activate:e.activateLayout}})})],2),e._v(" "),i("div",{staticClass:"context_menu",style:e.menuStyle,on:{click:e.clickContextMenu}},[i("ul",e._l(e.menuList,function(t,o){return i("li",{class:{can:e.getActiveLayoutObj}},[i("span",[e._v(e._s(o))]),e._v(e._s(t))])}))]),e._v(" "),i("el-slider",{attrs:{vertical:"",min:.25,max:3,step:.25,"format-tooltip":e.formatTooltip},model:{value:e.pageZoom,callback:function(t){e.pageZoom=t},expression:"pageZoom"}})],1),e._v(" "),i("div",{staticClass:"editor_config",on:{keydown:function(e){e.stopPropagation()}}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.showStyleTab?i("el-tab-pane",{attrs:{label:"样式",name:"style"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"text"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'text'"}],staticClass:"config_config"},[i("el-form",{ref:"style_text",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.text,rules:e.config.text.rules}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("位置排列")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"x 轴",prop:"left"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.text.left,callback:function(t){e.$set(e.config.text,"left",t)},expression:"config.text.left"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y 轴",prop:"top"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.text.top,callback:function(t){e.$set(e.config.text,"top",t)},expression:"config.text.top"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.text.width,callback:function(t){e.$set(e.config.text,"width",t)},expression:"config.text.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.text.height,callback:function(t){e.$set(e.config.text,"height",t)},expression:"config.text.height"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("文本")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"旋转",prop:"rotation"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-360,max:360},model:{value:e.config.text.rotation,callback:function(t){e.$set(e.config.text,"rotation",t)},expression:"config.text.rotation"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"透明",prop:"alpha"}},[i("el-input-number",{attrs:{"controls-position":"right",min:.1,max:1,step:.1},model:{value:e.config.text.alpha,callback:function(t){e.$set(e.config.text,"alpha",t)},expression:"config.text.alpha"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"字体",prop:"fontFamily"}},[i("el-select",{model:{value:e.config.text.fontFamily,callback:function(t){e.$set(e.config.text,"fontFamily",t)},expression:"config.text.fontFamily"}},e._l(e.config.fontFamilyList,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"字号",prop:"fontSize"}},[i("el-input-number",{attrs:{"controls-position":"right",min:8,max:100},model:{value:e.config.text.fontSize,callback:function(t){e.$set(e.config.text,"fontSize",t)},expression:"config.text.fontSize"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"颜色",prop:"fontColor"}},[i("el-color-picker",{model:{value:e.config.text.fontColor,callback:function(t){e.$set(e.config.text,"fontColor",t)},expression:"config.text.fontColor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"字间距","label-width":"65px",prop:"letterSpacing"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:360},model:{value:e.config.text.letterSpacing,callback:function(t){e.$set(e.config.text,"letterSpacing",t)},expression:"config.text.letterSpacing"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"行高",prop:"lineHeight"}},[i("el-input",{attrs:{placeholder:"毫米或百分比"},model:{value:e.config.text.lineHeight,callback:function(t){e.$set(e.config.text,"lineHeight",t)},expression:"config.text.lineHeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"字体粗细","label-width":"80px",prop:"fontWeight"}},[i("el-select",{model:{value:e.config.text.fontWeight,callback:function(t){e.$set(e.config.text,"fontWeight",t)},expression:"config.text.fontWeight"}},e._l(e.config.fontWeightList,function(e,t){return i("el-option",{key:t,attrs:{label:t+e,value:t}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"样式",prop:"fontStyle"}},[i("el-checkbox-group",{model:{value:e.config.text.fontStyle,callback:function(t){e.$set(e.config.text,"fontStyle",t)},expression:"config.text.fontStyle"}},[i("el-checkbox-button",{attrs:{label:"fontItalic"}},[i("i",{staticClass:"fa fa-italic"})]),e._v(" "),i("el-checkbox-button",{attrs:{label:"fontUnderline"}},[i("i",{staticClass:"fa fa-underline"})])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"单行",prop:"wrap"}},[i("el-switch",{model:{value:e.config.text.wrap,callback:function(t){e.$set(e.config.text,"wrap",t)},expression:"config.text.wrap"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("排列")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-radio-group",{staticStyle:{"margin-bottom":"10px"},model:{value:e.config.text.orientation,callback:function(t){e.$set(e.config.text,"orientation",t)},expression:"config.text.orientation"}},[i("el-radio-button",{attrs:{label:"horizontal"}},[e._v("水平文本")]),e._v(" "),i("el-radio-button",{attrs:{label:"vertical"}},[e._v("垂直文本")])],1),e._v(" "),i("el-radio-group",{model:{value:e.config.text.align,callback:function(t){e.$set(e.config.text,"align",t)},expression:"config.text.align"}},e._l(e.config.fontAlign,function(e){return i("el-radio-button",{key:e,attrs:{label:e}},[i("i",{class:["fa","fa-align-"+e]})])})),e._v(" "),i("el-radio-group",{model:{value:e.config.text.valign,callback:function(t){e.$set(e.config.text,"valign",t)},expression:"config.text.valign"}},e._l(e.config.valignList,function(e,t){return i("el-radio-button",{key:e,attrs:{label:t}},[i("i",{class:["fa","fa-rotate-90","fa-align-"+e]})])}))],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"line"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'line'"}],staticClass:"config_config"},[i("el-form",{attrs:{rules:e.config.line.rules,inline:!0,"label-width":"53px",size:"mini"},model:{value:e.config.line,callback:function(t){e.$set(e.config,"line",t)},expression:"config.line"}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("线条设置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"起x1"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:1e3},model:{value:e.config.line.startX,callback:function(t){e.$set(e.config.line,"startX",t)},expression:"config.line.startX"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"起y1"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:1e3},model:{value:e.config.line.startY,callback:function(t){e.$set(e.config.line,"startY",t)},expression:"config.line.startY"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"终x2"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:1e3},model:{value:e.config.line.endX,callback:function(t){e.$set(e.config.line,"endX",t)},expression:"config.line.endX"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"终y2"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:1e3},model:{value:e.config.line.endY,callback:function(t){e.$set(e.config.line,"endY",t)},expression:"config.line.endY"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("线段样式")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{model:{value:e.config.line.lineType,callback:function(t){e.$set(e.config.line,"lineType",t)},expression:"config.line.lineType"}},e._l(e.config.lineType,function(e,t){return i("el-option",{key:e,attrs:{label:e,value:t}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"大小"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:50},model:{value:e.config.line.lineWidth,callback:function(t){e.$set(e.config.line,"lineWidth",t)},expression:"config.line.lineWidth"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"颜色"}},[i("el-color-picker",{model:{value:e.config.line.lineColor,callback:function(t){e.$set(e.config.line,"lineColor",t)},expression:"config.line.lineColor"}})],1)],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"rect"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'rect'"}],staticClass:"config_config"},[i("el-form",{attrs:{rules:e.config.rect.rules,inline:!0,"label-width":"53px",size:"mini"},model:{value:e.config.rect,callback:function(t){e.$set(e.config,"rect",t)},expression:"config.rect"}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("矩形设置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"x 轴",prop:"left"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.rect.left,callback:function(t){e.$set(e.config.rect,"left",t)},expression:"config.rect.left"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y 轴",prop:"top"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.rect.top,callback:function(t){e.$set(e.config.rect,"top",t)},expression:"config.rect.top"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e3},model:{value:e.config.rect.width,callback:function(t){e.$set(e.config.rect,"width",t)},expression:"config.rect.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e3},model:{value:e.config.rect.height,callback:function(t){e.$set(e.config.rect,"height",t)},expression:"config.rect.height"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("边框")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{model:{value:e.config.rect.borderStyle,callback:function(t){e.$set(e.config.rect,"borderStyle",t)},expression:"config.rect.borderStyle"}},e._l(e.config.lineType,function(e,t){return i("el-option",{key:e,attrs:{label:e,value:t}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"大小"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:50},model:{value:e.config.rect.borderWidth,callback:function(t){e.$set(e.config.rect,"borderWidth",t)},expression:"config.rect.borderWidth"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"颜色"}},[i("el-color-picker",{model:{value:e.config.rect.borderColor,callback:function(t){e.$set(e.config.rect,"borderColor",t)},expression:"config.rect.borderColor"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("背景")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"背景颜色","label-width":"80px"}},[i("el-color-picker",{model:{value:e.config.rect.fillColor,callback:function(t){e.$set(e.config.rect,"fillColor",t)},expression:"config.rect.fillColor"}})],1)],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"barcode"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'barcode'"}],staticClass:"config_config"},[i("el-form",{ref:"style_barcode",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.barcode}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("位置排列")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"x 轴",prop:"left"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.barcode.left,callback:function(t){e.$set(e.config.barcode,"left",t)},expression:"config.barcode.left"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y 轴",prop:"top"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.barcode.top,callback:function(t){e.$set(e.config.barcode,"top",t)},expression:"config.barcode.top"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.barcode.width,callback:function(t){e.$set(e.config.barcode,"width",t)},expression:"config.barcode.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.barcode.height,callback:function(t){e.$set(e.config.barcode,"height",t)},expression:"config.barcode.height"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("其他")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"透明",prop:"alpha"}},[i("el-input-number",{attrs:{"controls-position":"right",min:.1,max:1,step:.1},model:{value:e.config.barcode.alpha,callback:function(t){e.$set(e.config.barcode,"alpha",t)},expression:"config.barcode.alpha"}})],1)],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"qrcode"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'qrcode'"}],staticClass:"config_config"},[i("el-form",{ref:"style_qrcode",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.qrcode}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("位置排列")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"x 轴",prop:"left"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.qrcode.left,callback:function(t){e.$set(e.config.qrcode,"left",t)},expression:"config.qrcode.left"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y 轴",prop:"top"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.qrcode.top,callback:function(t){e.$set(e.config.qrcode,"top",t)},expression:"config.qrcode.top"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.qrcode.width,callback:function(t){e.$set(e.config.qrcode,"width",t)},expression:"config.qrcode.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.qrcode.height,callback:function(t){e.$set(e.config.qrcode,"height",t)},expression:"config.qrcode.height"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("其他")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"透明",prop:"alpha"}},[i("el-input-number",{attrs:{"controls-position":"right",min:.1,max:1,step:.1},model:{value:e.config.qrcode.alpha,callback:function(t){e.$set(e.config.qrcode,"alpha",t)},expression:"config.qrcode.alpha"}})],1)],1)])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"image"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'image'"}],staticClass:"config_config"},[i("el-form",{ref:"style_qrcode",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.image,rules:e.config.image.rules}},[i("div",{staticClass:"el-collapse-item__header"},[e._v("位置排列")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"x 轴",prop:"left"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.image.left,callback:function(t){e.$set(e.config.image,"left",t)},expression:"config.image.left"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"y 轴",prop:"top"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-1e3,max:2e3},model:{value:e.config.image.top,callback:function(t){e.$set(e.config.image,"top",t)},expression:"config.image.top"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.image.width,callback:function(t){e.$set(e.config.image,"width",t)},expression:"config.image.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e3},model:{value:e.config.image.height,callback:function(t){e.$set(e.config.image,"height",t)},expression:"config.image.height"}})],1)],1),e._v(" "),i("div",{staticClass:"el-collapse-item__header"},[e._v("其他")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form-item",{attrs:{label:"透明",prop:"alpha"}},[i("el-input-number",{attrs:{"controls-position":"right",min:.1,max:1,step:.1},model:{value:e.config.image.alpha,callback:function(t){e.$set(e.config.image,"alpha",t)},expression:"config.image.alpha"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"旋转",prop:"rotation"}},[i("el-input-number",{attrs:{"controls-position":"right",min:-360,max:360},model:{value:e.config.image.rotation,callback:function(t){e.$set(e.config.image,"rotation",t)},expression:"config.image.rotation"}})],1)],1)])],1)]):e._e(),e._v(" "),e.showConfigTab?i("el-tab-pane",{attrs:{label:"配置",name:"config"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"page"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'page'"}],staticClass:"config_config"},[i("div",{staticClass:"el-collapse-item__header"},[e._v("模板设置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form",{ref:"config_config",attrs:{inline:!0,"label-width":"53px",model:e.config.page,rules:e.config.page.rules}},[i("el-form-item",{staticClass:"full-line",attrs:{label:"尺寸",prop:"size"}},[i("el-select",{model:{value:e.config.page.size,callback:function(t){e.$set(e.config.page,"size",t)},expression:"config.page.size"}},e._l(e.config.pageSize,function(e,t){return i("el-option",{key:t,attrs:{label:t,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"宽度",prop:"width"}},[i("el-input-number",{attrs:{disabled:""!=e.config.page.size,"controls-position":"right",min:100,max:1e3},model:{value:e.config.page.width,callback:function(t){e.$set(e.config.page,"width",t)},expression:"config.page.width"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"高度",prop:"height"}},[i("el-input-number",{attrs:{disabled:""!=e.config.page.size,"controls-position":"right",min:100,max:1e3},model:{value:e.config.page.height,callback:function(t){e.$set(e.config.page,"height",t)},expression:"config.page.height"}})],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"水平偏移",prop:"horizontalOffset"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:e.config.page.width/2},model:{value:e.config.page.horizontalOffset,callback:function(t){e.$set(e.config.page,"horizontalOffset",t)},expression:"config.page.horizontalOffset"}})],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"垂直偏移",prop:"verticalOffset"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0,max:e.config.page.height/2},model:{value:e.config.page.verticalOffset,callback:function(t){e.$set(e.config.page,"verticalOffset",t)},expression:"config.page.verticalOffset"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"模板名称"},model:{value:e.config.page.name,callback:function(t){e.$set(e.config.page,"name",t)},expression:"config.page.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分页",prop:"splitable"}},[i("el-radio-group",{attrs:{disabled:""},model:{value:e.config.page.splitable,callback:function(t){e.$set(e.config.page,"splitable",t)},expression:"config.page.splitable"}},[i("el-radio",{attrs:{label:!0}},[e._v("分页")]),e._v(" "),i("el-radio",{attrs:{label:!1}},[e._v("不分页")])],1)],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"描述",prop:"describe"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"模板描述"},model:{value:e.config.page.describe,callback:function(t){e.$set(e.config.page,"describe",t)},expression:"config.page.describe"}})],1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"text"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'text'"}],staticClass:"config_config"},[i("div",{staticClass:"el-collapse-item__header"},[e._v("文本配置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form",{ref:"config_text",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.text,rules:e.config.text.rules}},[i("el-form-item",{staticClass:"full-line",attrs:{label:"内容",prop:"value"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入文本内容"},model:{value:e.config.text.value,callback:function(t){e.$set(e.config.text,"value",t)},expression:"config.text.value"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"别名"}},[i("el-input",{attrs:{placeholder:"请输入别名"},model:{value:e.config.text.alias,callback:function(t){e.$set(e.config.text,"alias",t)},expression:"config.text.alias"}})],1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"barcode"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'barcode'"}],staticClass:"config_config"},[i("div",{staticClass:"el-collapse-item__header"},[e._v("条形码配置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form",{ref:"config_barcode",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.barcode,rules:e.config.barcode.rules}},[i("el-form-item",{staticClass:"full-line",attrs:{label:"内容",prop:"value"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入条形码内容"},model:{value:e.config.barcode.value,callback:function(t){e.$set(e.config.barcode,"value",t)},expression:"config.barcode.value"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"码式"}},[i("el-select",{model:{value:e.config.barcode.type,callback:function(t){e.$set(e.config.barcode,"type",t)},expression:"config.barcode.type"}},e._l(e.config.barcodeType,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"文字"}},[i("el-radio-group",{model:{value:e.config.barcode.hideText,callback:function(t){e.$set(e.config.barcode,"hideText",t)},expression:"config.barcode.hideText"}},[i("el-radio",{attrs:{label:!1}},[e._v("显示")]),e._v(" "),i("el-radio",{attrs:{label:!0}},[e._v("隐藏")])],1)],1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"qrcode"===e.getActiveLayoutType,expression:"getActiveLayoutType === 'qrcode'"}],staticClass:"config_config"},[i("div",{staticClass:"el-collapse-item__header"},[e._v("二维码配置")]),e._v(" "),i("div",{staticClass:"el-collapse-item__content"},[i("el-form",{ref:"config_qrcode",attrs:{inline:!0,"label-width":"53px",size:"mini",model:e.config.qrcode,rules:e.config.qrcode.rules}},[i("el-form-item",{staticClass:"full-line",attrs:{label:"内容",prop:"value"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入文本内容"},model:{value:e.config.qrcode.value,callback:function(t){e.$set(e.config.qrcode,"value",t)},expression:"config.qrcode.value"}})],1),e._v(" "),i("el-form-item",{staticClass:"full-line",attrs:{label:"码式"}},[i("el-select",{model:{value:e.config.qrcode.type,callback:function(t){e.$set(e.config.qrcode,"type",t)},expression:"config.qrcode.type"}},e._l(e.config.qrcodeType,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1)])]):e._e()],1)],1)])]),e._v(" "),i("el-dialog",{attrs:{title:"菜鸟打印\\预览",visible:e.dialogVisible,width:"550px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{attrs:{model:e.printerConfig,inline:"","label-width":"80px"}},[i("el-form-item",{staticClass:"full-line",attrs:{label:"打印机"}},[i("el-select",{attrs:{placeholder:"请选择打印机"},model:{value:e.printerConfig.name,callback:function(t){e.$set(e.printerConfig,"name",t)},expression:"printerConfig.name"}},e._l(e.printer.printerList,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"宽度"}},[i("el-input-number",{attrs:{disabled:"","controls-position":"right"},model:{value:e.printerConfig.paperSize.width,callback:function(t){e.$set(e.printerConfig.paperSize,"width",t)},expression:"printerConfig.paperSize.width"}})],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"高度"}},[i("el-input-number",{attrs:{disabled:"","controls-position":"right"},model:{value:e.printerConfig.paperSize.height,callback:function(t){e.$set(e.printerConfig.paperSize,"height",t)},expression:"printerConfig.paperSize.height"}})],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"水平偏移"}},[i("el-input-number",{attrs:{disabled:"","controls-position":"right",min:0,max:10},model:{value:e.printerConfig.horizontalOffset,callback:function(t){e.$set(e.printerConfig,"horizontalOffset",t)},expression:"printerConfig.horizontalOffset"}})],1),e._v(" "),i("el-form-item",{staticClass:"extrusion_line",attrs:{label:"垂直偏移"}},[i("el-input-number",{attrs:{disabled:"","controls-position":"right",min:0,max:10},model:{value:e.printerConfig.verticalOffset,callback:function(t){e.$set(e.printerConfig,"verticalOffset",t)},expression:"printerConfig.verticalOffset"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"medium"},on:{click:function(t){e.handlePreview("pdf")}}},[e._v("PDF预览")]),e._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:function(t){e.handlePreview("image")}}},[e._v("图片预览")]),e._v(" "),i("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.handlePreview}},[e._v("打印")])],1)],1)],1)},n=[],a={render:o,staticRenderFns:n};t.a=a},182:function(e,t){},183:function(e,t){},54:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(92),a=o(n),r=i(104),l=o(r);t.default={name:"Editor",mixins:[l.default.Editor,l.default.Printer],data:function(){return{dialogVisible:!1}},components:{Drag:a.default}}},55:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(94),a=o(n),r=i(100),l=o(r),s=i(102),c=o(s);t.default={name:"Drag-component",props:{config:{type:Object,required:!0,validator:function(e){return e.editable=!1!==e.editable,!0}}},data:function(){return{rate:3.78,min:10,array:["n","s","w","e","ne","nw","se","sw"],dragging:!1,divStyle:{},inStyle:{},pStyle:{},startPageX:0,startPageY:0,x:0,y:0,h:0,w:0}},mounted:function(){this.init()},computed:{getText:function(){var e=this.config.config;return e.alias?e.value.includes("<%=")?e.alias:e.value:e.value||"请输入文本"}},methods:{isShow:function(e){if(!this.config.editable||!this.config.active)return!1;var t=this.config.type;return"s"===e||"n"===e?"h-line"!==t:"w"===e||"e"===e?"v-line"!==t:!t.includes("-line")},getExchange:function(e,t){return this.getZoom(e*this.rate)+(t||0)},getZoom:function(e){return e*this.config.zoom},divideZoom:function(e){return(e/this.config.zoom).toFixed(2)},init:function(){var e=this.config,t=e.config,i=this.getExchange,o=this.getZoom;"h-line"===e.type||"v-line"===e.type?(this.x=i(t.startX),this.y=i(t.startY),this.w=i(t.endX-t.startX),this.h=o(t.lineWidth),"v-line"===e.type&&(this.w=o(t.lineWidth),this.h=i(t.endY-t.startY))):(this.x=i(t.left),this.y=i(t.top),this.h=i(t.height),this.w=i(t.width))},handleClick:function(){this.config.editable?(this.dragging=!0,this.$emit("activate",this.config)):this.$emit("activate",null)},handleResize:function(e){if("mouseUp"===e)return this.dragging=!1,this.init();this.dragging=!0;var t=e.sign,i=this.config.type,o=this.config.config,n=this.divideZoom,a=void 0,r=void 0;if("n"===t||"s"===t){if(e.x=0,"v-line"===i){var l={};return void("n"===t?(l.startY=n((this.y+e.y)/this.rate),o.endY>l.startY&&this.$emit("update",l)):(l.endY=n((this.y+this.h+e.y)/this.rate),l.endY>o.startY&&this.$emit("update",l)))}}else if(("e"===t||"w"===t)&&(e.y=0,"h-line"===i)){var s={};return void("w"===t?(s.startX=n((this.x+e.x)/this.rate),o.endX>s.startX&&this.$emit("update",s)):(s.endX=n((this.x+this.w+e.x)/this.rate),s.endX>o.startX&&this.$emit("update",s)))}t.includes("n")&&(a=this.y+e.y,e.y*=-1),t.includes("w")&&(r=this.x+e.x,e.x*=-1);var c=this.h+e.y,f=this.w+e.x,d=this.config.config,u={};c>=this.min&&("v-line"===i?"s"===t?u.endY=n((this.y+e.y)/this.rate):"n"===t&&(u.startY=n((this.y+e.y)/this.rate)):(u.height=n(c/this.rate),a&&(u.top=n(a/this.rate)))),f>=this.min&&("h-line"===i?u.endX=n(d.endX+f/this.rate):u.width=n(f/this.rate),r&&("h-line"===i?u.startX=n(d.startX+r/this.rate):u.left=n(r/this.rate))),this.$emit("update",u)},mouseUp:function(){this.init(),this.dragging=!1,document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.mouseUp)},mouseDown:function(e){this.handleClick();var t=e||window.event;this.startPageX=t.pageX,this.startPageY=t.pageY,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.mouseUp)},drag:function(e){if(this.config.editable&&this.dragging){var t=e||window.event,i=this.x+t.pageX-this.startPageX,o=this.y+t.pageY-this.startPageY,n=this.divideZoom,a=n(i/this.rate),r=n(o/this.rate),l=this.config.type;if("h-line"===l||"v-line"===l){var s="v-line"===l?a:n((this.w+i)/this.rate),c="h-line"===l?r:n((this.h+o)/this.rate);this.$emit("update",{startX:a,startY:r,endX:s,endY:c})}else this.$emit("update",{left:a,top:r})}}},watch:{config:{handler:function(e){var t=this;!this.dragging&&this.init();var i={},o=e.config,n=this.getZoom,r={zIndex:o.zIndex,border:"1px dashed rgba(0,0,0,0.6)"};["top","left","height","width","rotation"].forEach(function(i){var o=e.config[i];"rotation"===i?o&&(r.transform="rotate("+o+"deg)"):r[i]=n(o*t.rate)+"px"});var l=n(o.lineWidth)+"pt "+o.lineType+" "+o.lineColor,s=this.getExchange;if("h-line"===e.type)r={left:s(o.startX,"px"),top:s(o.startY,"px"),width:s(Math.max(1,o.endX-o.startX),"px"),height:n(o.lineWidth)+"pt"},i={borderTop:l};else if("v-line"===e.type)r={left:s(o.startX,"px"),top:s(o.startY,"px"),width:n(o.lineWidth)+"pt",height:s(Math.max(1,o.endY-o.startY),"px")},i={borderLeft:l};else if("text"===e.type){i={fontFamily:o.fontFamily,fontSize:n(o.fontSize)+"pt",letterSpacing:n(o.letterSpacing)+"pt",fontWeight:o.fontWeight,color:o.fontColor},"vertical"===o.orientation&&(i.writingMode="tb-rl"),i.display="flex";var f={left:"flex-start",top:"flex-start",center:"center",middle:"center",right:"flex-end",bottom:"flex-end"};i.justifyContent=f[o.align],i.alignItems=f[o.valign],i.textAlign=o.align,o.lineHeight&&(i.lineHeight=o.lineHeight+(o.lineHeight.includes("%")?"":"mm")),o.wrap&&(i.whiteSpace="nowrap",i.overflow="hidden"),o.fontStyle.includes("fontItalic")&&(i.fontStyle="italic"),o.fontStyle.includes("fontUnderline")&&(i.textDecoration="underline")}else"barcode"===e.type?(i.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATAAAAABCAIAAADWyGUYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAF9JREFUeNqMkkEKADEIA/X/j3YXvAihw+RQikoS0/bMVFV3/+feF1m5eHW3vngx5+QFe7gV001O7yG7qWv8mB15d/8Who1zMDzGrcmTU2V1v6P/FTzJ6pwP+7+6nwADABUFff9mVhECAAAAAElFTkSuQmCC)",this.pStyle={fontSize:n(14)+"px"}):"qrcode"===e.type?this.$nextTick(function(){var e=t.$refs.can;e.width=e.height=n(t.w),c.default.draw(o.value,e,e.width)}):"image"===e.type?i.backgroundImage="url("+o.src+")":"rect"===e.type&&(i={},o.fillColor&&(i.backgroundColor=o.fillColor),o.borderWidth&&(i.border=n(o.borderWidth)+"pt "+o.borderStyle+" "+o.borderColor));o.alpha&&(i.opacity=o.alpha),e.reject&&(0,a.default)(e.reject).forEach(function(t){r[t]=e.reject[t]}),this.divStyle=r,this.inStyle=i},deep:!0,immediate:!0}},components:{"drag-angle":l.default}}},61:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"DragAngle-component",props:{sign:{type:String,required:!0,validator:function(e){return["n","ne","nw","e","se","s","sw","w"].includes(e)}}},data:function(){return{dragging:!1,x:0,y:0}},computed:{getStyle:function(){var e="3px solid rgba(0,0,0,0.5)",t="-2px",i="calc(50% - 3px)",o=this.sign,n={position:"absolute",height:"6px",width:"6px",cursor:o+"-resize",zIndex:2};return o.includes("w")&&(n.borderLeft=e,n.left=t,"w"===o&&(n.top=i)),o.includes("n")&&(n.borderTop=e,n.top=t,"n"===o&&(n.left=i)),o.includes("e")&&(n.borderRight=e,n.right=t,"e"===o&&(n.top=i)),o.includes("s")&&(n.borderBottom=e,n.bottom=t,"s"===o&&(n.left=i)),n}},methods:{mouseUp:function(){this.dragging&&(this.dragging=!1,document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.mouseUp),this.$emit("reSize","mouseUp"))},mouseDown:function(e){var t=e||window.event;this.x=t.pageX,this.y=t.pageY,this.dragging=!0,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.mouseUp)},drag:function(e){if(this.dragging){var t=e||window.event;this.$emit("reSize",{x:t.pageX-this.x,y:t.pageY-this.y,sign:this.sign})}}}}},86:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(3),a=o(n),r=i(90),l=o(r),s=i(143),c=o(s);i(182),i(183),a.default.use(c.default,{size:"small"}),new a.default({render:function(e){return e(l.default)}}).$mount("#app")},90:function(e,t,i){"use strict";function o(e){i(91)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);var l=i(142),s=i(30),c=o,f=s(a.a,l.a,!1,c,null,null);t.default=f.exports},91:function(e,t){},92:function(e,t,i){"use strict";function o(e){i(93)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(55),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);var l=i(103),s=i(30),c=o,f=s(a.a,l.a,!1,c,null,null);t.default=f.exports},93:function(e,t){}},[86]);